<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Formation Flying Robots | Spencer Folk </title> <meta name="author" content="Spencer Folk"> <meta name="description" content="A swarm of small UAVs flying in formation using motion capture."> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%A4%96&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://spencerfolk.github.io/projects/project_swarms/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Spencer Folk </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Formation Flying Robots</h1> <p class="post-description">A swarm of small UAVs flying in formation using motion capture.</p> </header> <article> <p>In late fall of 2024, myself and a few of my labmates were tasked with putting together a demo of a coordinated swarm of UAVs for the <a href="http://thejohnscottaward.org/" rel="external nofollow noopener" target="_blank">John Scott Award</a> administered by the American Philosophical Society.</p> <p>The goal was to showcase multiple UAVs flying unique formations, somewhat mimicking the increasingly popular drone shows displayed at large events, but this demo had to happen indoors and of course had to be safe for viewers! To accomplish this we actually set up a small motion capture space. You can see below what the demo space looked like.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/swarms/mocap_setup-480.webp 480w,/assets/img/projects/swarms/mocap_setup-800.webp 800w,/assets/img/projects/swarms/mocap_setup-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/swarms/mocap_setup.jpg" class="rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Our mobile motion capture space set up at the John Scott Award ceremony. November 14th, 2024. Philadelphia, PA. Big props go to Fernando Cladera for coordinating all the logistics for this setup. </div> <p>The exciting part of this demo was using our creativity to come up with sequences of dynamic trajectories that were entertaining to watch. We played around with circles, lissajous paths, and more to create complex patterns moving in space. Moreover, we designed transition trajectories using minimum snap trajectory generation that would seamlessly reposition the UAVs from the end of one formation to the beginning of the next.</p> <div class="row justify-content-sm-center"> <iframe src="https://drive.google.com/file/d/1NBDKm7-J_7QgY_mRDESS0Uw8P_Cyh8BT/preview" width="960" height="540" allow="autoplay"></iframe> </div> <div class="caption"> A train of quadrotor UAVs performing a figure eight formation. </div> <div class="row justify-content-sm-center"> <iframe src="https://drive.google.com/file/d/1o2m4WTqH2aynb6mLst_150lwLS-1-tNX/preview" width="960" height="540" allow="autoplay"></iframe> </div> <div class="caption"> Four quadrotor UAVs forming a twisting circle that traces out a toroid in space. Yes, there was a crash at the end of this video! </div> <p>The hard part of this demo was figuring out the coordination of these UAVs to ensure that they did not collide on takeoff or when transitioning between formations. We didn’t have time to come up with or implement a sophisticated solution involving some multi-agent routing algorithm… instead we had to rely on a little bit of trial and error.</p> <p>To aid with that trial and error, the night before the event I wrote a script using <a href="https://github.com/spencerfolk/rotorpy/tree/main" rel="external nofollow noopener" target="_blank">RotorPy</a> to check our trajectories offline rather than waste precious time and batteries. RotorPy simulated the closed loop tracking of all the agents’ trajectories simultaneously and checked for any collisions. It would report where collisions happened in space and which two agents collided, so that it was clear which trajectories needed to be adjusted.</p> <p>I wrote an interface that would interpret our ROS launchfiles and set up RotorPy appropriately such that we could craft the trajectories in ROS and test them in simulation before running them on the robots. Since RotorPy was using the same tracking controller as our real UAVs, we could test for collisions even if the UAVs started far away from their initial waypoint (e.g. takeoff).</p> <p>You can see one of the set of formations that we flew running in RotorPy below:</p> <div class="row justify-content-sm-center"> <iframe src="https://drive.google.com/file/d/15vo491mqBGwe-H6PhMqTgvKC3KScnrLV/preview" width="960" height="540" allow="autoplay"></iframe> </div> <div class="caption"> One of the formation sequences we came up with and tested in simulation for collisions before deploying. </div> <p>This was a very rewarding experience–mostly teaching me how to work under some serious time pressure, but also demonstrating to me the real logistical challenges drone shows face that you don’t really understand until you have to implement it yourself.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Spencer Folk. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: February 21, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>